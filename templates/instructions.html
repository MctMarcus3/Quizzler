{% extends "layout.html" %}
{% block content %}
    <article>
        <header>
            <h2>Quiz Instructions</h2>
        </header>
        <h3>{{ quiz.name }}</h3>
        <ul>
            <li><strong>Number of Questions:</strong> {{ total_questions }}</li>
            <li>
                <strong>Time Limit:</strong> 
                {% if quiz.timer > 0 %}
                    {{ (quiz.timer / 60)|round|int }} minutes
                {% else %}
                    <strong>Unlimited</strong>
                {% endif %}
            </li>
        </ul>
        <div id="instructions-content">
            <p>Please answer all questions to the best of your ability.</p>
        </div>     
        <footer>
            <a href="{{ url_for('student.take_quiz', q_num=1) }}" role="button" class="contrast">Begin Quiz</a>
        </footer>
    </article>
    <!-- Include the marked.js library -->
    <script src="{{ url_for('static', filename='js/marked.min.js') }}"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Get the raw instruction text from the quiz data passed by Flask
            const rawInstructions = {{ quiz.get('instructions', '') | tojson }};

            // Only render if there are instructions
            if (rawInstructions) {
                const instructionsContainer = document.getElementById('instructions-content');
                // Parse the Markdown and set it as the container's HTML content
                instructionsContainer.innerHTML = marked.parse(rawInstructions);
            }
        });
    </script>
{% endblock %}